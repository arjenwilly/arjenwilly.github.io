<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>arjenwilts.GitHub.io by arjenwilts</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Deploying Azure VM's using terraform</h1>
        <p></p>


        <p class="view"><a href="https://github.com/arjenwilts">View My GitHub Profile</a></p>

      </header>
      <section>
        <p>In order to quickly deploy VM's on your azure subscription, you can use JSON templates. These templates are parsed against microsofts API.
        However, creating seperate JSON's for all your customers might be time consuming.
        <br><br>
        Therefore, a  tutorial how to get VM's deployed against your azure subscription.<br>
        P.S. If some steps are not working, or you need some detailed infomation, please contact me :)
        <br><br>
       
        1. Create a local VM on your desktop, CentOS7 in my case, and install terraform. <br>
        2. Login to the azure management portal <a href="https://manage.windowsazure.com">manage.windowsazure.com</a><br>
        3. Click active directory --> your subscription --> applications, and click add:<br>
          <img src="images/application1.JPG" class="inline"/><br>
        4. Give it a name, click next and give it a random url, since we're not using a url for it yet.<br>
        5. Complete the creation of the object. My object is called devopskeyfault:<br><img src="images/application2.JPG" class="inline"/><br>
        6. Click on your created object, and click configure. You can see the details here you need in your terraform configuration: <br>
        <li><b>client_id</b>:</li><br>
        <li><b>client_secret</b>:<img src="images/key.JPG" class="inline"/> </li> <br>
        The secret wil become visible after creating the key.<br>
        <li><b>subscription_id</b>:</li> Can be found via settings --> subscriptions
        <li><b>tenant_id</b>(customer endpoint):</li> This is the trickiest one:<br>
        - Go to the new management portal(you can see it popping up at top of your screen when visiting the "old azure portal"<br>
        - Go to subscriptions --> Click subscription --> Click all settings --> Click Users --> Click add:<br>
        <img src="images/contributor.JPG" class="inline"/><br><br>
        
        You need to select a contributor role, and select the application you created. In my case it's the devopskeyfault role:<br>
        <img src="images/deveopskeyfault.JPG" class="inline"/><br><br>
        
        Now your role is mapped to the application, you can retrieve the tenant_id:<br>
        <img src="images/tenantid.JPG" class="inline"/><br><br>
        
      <h1>Ready to deploy!</h1>
      </p>
      
      </section>

    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
